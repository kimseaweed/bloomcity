"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("@morev/utils"),e=(e,r)=>!!r(e)||!!t.isObject(e)&&(2===Object.keys(e).length&&!Object.entries(e).some((([t,e])=>{const i=!["enter","leave"].includes(t),s=!r(e);return i||s}))),r=[0,-16],i={inheritAttrs:!1,props:{duration:{validator:r=>e(r,(e=>t.isInteger(e)&&e>=0)),default:300},easing:{validator:r=>e(r,(e=>t.isString(e)&&""!==e.trim())),default:()=>"cubic-bezier(.25, .8, .5, 1)"},delay:{validator:r=>e(r,(e=>t.isInteger(e)&&e>=0)),default:0},noOpacity:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},mode:{type:String,default:void 0},group:{type:Boolean,default:!1},tag:{type:String,default:"span"},noMove:{type:Boolean,default:!1},moveDuration:{type:Number,default:300}},computed:{cComponent(){return this.group?"transition-group":"transition"},cAttrs(){const{appear:t,mode:e,tag:r,duration:i}=this;return this.group?{appear:t,tag:r,duration:i,...this.$attrs}:{appear:t,mode:e,duration:i}},cHooks(){return{...this.$listeners,beforeEnter:(...t)=>{this.reduceTransition(...t),this.$emit("before-enter",...t)},beforeLeave:(...t)=>{var e;this.reduceTransition(...t),null==(e=this.initLeaving)||e.call(this,...t),this.$emit("before-leave",...t)},enter:(...t)=>{var e;null==(e=this.onEnter)||e.call(this,...t),this.$emit("enter",...t)},leave:(...t)=>{var e;null==(e=this.onLeave)||e.call(this,...t),this.$emit("leave",...t)},afterEnter:(...t)=>{var e;this.resetTransition(...t),null==(e=this.resetElement)||e.call(this,...t),this.$emit("after-enter",...t)},afterLeave:(...t)=>{var e;this.resetTransition(...t),null==(e=this.resetElement)||e.call(this,...t),this.$emit("after-leave",...t)}}}},methods:{setupTransition(t,e="enter"){var r,i,s;const o=(null==(r=this.duration)?void 0:r[e])??this.duration,n=(null==(i=this.easing)?void 0:i[e])??this.easing,a=(null==(s=this.delay)?void 0:s[e])??this.delay;t.style.setProperty("transition-duration",`${o}ms`,"important"),t.style.setProperty("transition-timing-function",`${n}`,"important"),t.style.setProperty("transition-delay",`${a}ms`,"important")},reduceTransition(t){t.style.setProperty("transition-duration","0ms","important"),t.style.setProperty("transition-delay","0ms","important")},resetTransition(t){t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-timing-function"),t.style.removeProperty("transition-delay")},initLeaving(t){if(!this.group||this.noMove)return t;const e=getComputedStyle(t),{width:r,height:i}=e,{marginLeft:s,marginTop:o}=e;return t.style.setProperty("left",t.offsetLeft-parseFloat(s)+"px","important"),t.style.setProperty("top",t.offsetTop-parseFloat(o)+"px","important"),t.style.setProperty("width",`${parseFloat(r)}px`,"important"),t.style.setProperty("height",`${parseFloat(i)}px`,"important"),t.style.setProperty("position","absolute","important"),t},setMoveDuration(){var t;this.group&&this.$el&&(null==(t=this.$el.style)||t.setProperty("--move-duration",`${this.moveDuration}ms`))}},watch:{moveDuration(){this.setMoveDuration()},group(){this.setMoveDuration()}},mounted(){this.setMoveDuration()}};function s(t,e,r,i,s,o,n,a){var l,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=r,p._compiled=!0),i&&(p.functional=!0),o&&(p._scopeId="data-v-"+o),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},p._ssrRegister=l):s&&(l=a?function(){s.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(p.functional){p._injectStyles=l;var m=p.render;p.render=function(t,e){return l.call(e),m(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:p}}const o={};var n=s({name:"transition-expand",mixins:[i],props:{axis:{validator:r=>e(r,(e=>t.isString(e)&&["x","y"].includes(e))),default:"y"}},data:()=>({}),computed:{},methods:{async onEnter(t){await this.$nextTick(),await this.$nextTick(),this.getSizes(t),this.collapseElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.expandElement(t,"enter")},onLeave(t){this.getSizes(t),this.expandElement(t,"leave"),t.offsetTop,this.setupTransition(t,"leave"),this.collapseElement(t,"leave")},expandElement(t,e="enter"){var r;const i=(null==(r=this.axis)?void 0:r[e])??this.axis,s="x"===i?"left":"top",o="x"===i?"right":"bottom",n=t.visual.size[i],a=t.visual.margin[i],l=t.visual.padding[i];this.noOpacity||t.style.setProperty("opacity",t.visual.opacity),delete t.visual,t.style.setProperty("x"===i?"width":"height",`${parseFloat(n)}px`),t.style.setProperty(`padding-${s}`,`${parseFloat(l[0])}px`),t.style.setProperty(`padding-${o}`,`${parseFloat(l[1])}px`),t.style.setProperty(`margin-${s}`,`${parseFloat(a[0])}px`),t.style.setProperty(`margin-${o}`,`${parseFloat(a[1])}px`)},collapseElement(t,e="enter"){var r;const i=(null==(r=this.axis)?void 0:r[e])??this.axis,s="x"===i?"width":"height",o="x"===i?"left":"top",n="x"===i?"right":"bottom";this.noOpacity||t.style.setProperty("opacity",0),t.style.setProperty(s,"0px"),t.style.setProperty(`padding-${o}`,"0px"),t.style.setProperty(`padding-${n}`,"0px"),t.style.setProperty(`margin-${o}`,"0px"),t.style.setProperty(`margin-${n}`,"0px")},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("width"),t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-right"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("padding-left"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-right"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("margin-left")},getSizes(t){const e=getComputedStyle(t),{opacity:r}=e,{width:i,height:s}=e,{paddingTop:o,paddingRight:n,paddingBottom:a,paddingLeft:l}=e,{marginTop:p,marginRight:m,marginBottom:d,marginLeft:u}=e;t.visual={opacity:r,size:{x:i,y:s},padding:{x:[l,n],y:[o,a]},margin:{x:[u,m],y:[p,d]}}}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.cComponent,t._g(t._b({tag:"component",attrs:{name:"expand"}},"component",t.cAttrs,!1),t.cHooks),[t._t("default")],2)}),[],!1,a,null,null,null);function a(t){for(let e in o)this[e]=o[e]}const l=function(){return n.exports}();const p={};var m=s({name:"transition-fade",mixins:[i],props:{},data:()=>({}),computed:{},methods:{onEnter(t){this.fadeElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.$nextTick((()=>t.style.removeProperty("opacity")))},onLeave(t){this.setupTransition(t,"leave"),this.fadeElement(t,"leave")},fadeElement(t,e="enter"){t.style.setProperty("opacity",0)},resetElement(t){t.style.removeProperty("opacity")}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.cComponent,t._g(t._b({tag:"component",attrs:{name:"fade"}},"component",t.cAttrs,!1),t.cHooks),[t._t("default")],2)}),[],!1,d,null,null,null);function d(t){for(let e in p)this[e]=p[e]}const u=function(){return m.exports}(),c=t=>{const e=t.startsWith("matrix3d")?"matrix3d":"matrix";return[e,"matrix3d"===e?t.slice(9,-1).split(",").map(Number):t.startsWith("matrix")?t.slice(7,-1).split(",").map(Number):[1,0,0,1,0,0]]};const y={};var h=s({name:"transition-scale",mixins:[i],props:{axis:{validator:r=>e(r,(e=>t.isString(e)&&["x","y","both"].includes(e))),default:"both"},origin:{validator:r=>e(r,(e=>t.isString(e)&&""!==e.trim())),default:"50% 50%"},scale:{validator:r=>e(r,(e=>t.isNumeric(e)&&e>=0&&e<=1)),default:0}},data:()=>({}),computed:{},methods:{onEnter(t){this.scaleElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),this.$nextTick((()=>{t.style.removeProperty("opacity"),t.style.removeProperty("transform")}))},onLeave(t){this.setupTransition(t,"leave"),this.scaleElement(t,"leave")},scaleElement(e,r="enter"){var i,s,o;const{transform:n}=getComputedStyle(e),a=(null==(i=this.axis)?void 0:i[r])??this.axis,l=(null==(s=this.origin)?void 0:s[r])??this.origin,p=t.clamp(1e-4,(null==(o=this.scale)?void 0:o[r])??this.scale,.9999),[m,d]=c(n);n.startsWith("matrix3d")?("y"!==a&&(d[0]=p),"x"!==a&&(d[5]=p)):n.startsWith("matrix")?("y"!==a&&(d[0]=p),"x"!==a&&(d[3]=p)):(d[0]="y"===a?1:p,d[3]="x"===a?1:p),this.noOpacity||e.style.setProperty("opacity",0),e.style.setProperty("transform",`${m}(${d})`),e.style.setProperty("transform-origin",`${l}`)},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("transform"),t.style.removeProperty("transform-origin")}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.cComponent,t._g(t._b({tag:"component",attrs:{name:"scale"}},"component",t.cAttrs,!1),t.cHooks),[t._t("default")],2)}),[],!1,f,null,null,null);function f(t){for(let e in y)this[e]=y[e]}const v=function(){return h.exports}();const g={};var x=s({name:"transition-slide",mixins:[i],props:{offset:{validator:r=>e(r,(e=>!!t.isArray(e)&&(2===e.length&&!e.some((e=>!t.isInteger(e)&&(!t.isString(e)||isNaN(Number(e.endsWith("%")?e.slice(0,-1):e)))))))),default:()=>r}},data:()=>({}),computed:{},methods:{onEnter(t){this.slideElement(t,"enter"),t.offsetTop,this.setupTransition(t,"enter"),t.style.removeProperty("opacity"),t.style.removeProperty("transform")},onLeave(t){this.setupTransition(t,"leave"),this.slideElement(t,"leave")},slideElement(e,r="enter"){var i;const{width:s,height:o,transform:n}=getComputedStyle(e),a=(null==(i=this.offset)?void 0:i[r])??this.offset;let[l,p]=a;if(!t.isNumeric(l)){const t=l.endsWith("%")?parseFloat(s)*(parseFloat(l.slice(0,-1))||0)/100:parseFloat(l);l=t}if(!t.isNumeric(p)){const t=p.endsWith("%")?parseFloat(o)*(parseFloat(p.slice(0,-1))||0)/100:parseFloat(p);p=t}const[m,d]=c(n);n.startsWith("matrix3d")?(d[12]+=l,d[13]+=p):n.startsWith("matrix")?(d[4]+=l,d[5]+=p):(d[4]=l,d[5]=p),this.noOpacity||e.style.setProperty("opacity",0),e.style.setProperty("transform",`${m}(${d})`)},resetElement(t){t.style.removeProperty("opacity"),t.style.removeProperty("transform")}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.cComponent,t._g(t._b({tag:"component",attrs:{name:"slide"}},"component",t.cAttrs,!1),t.cHooks),[t._t("default")],2)}),[],!1,P,null,null,null);function P(t){for(let e in g)this[e]=g[e]}const $=function(){return x.exports}(),E={TransitionExpand:l,TransitionFade:u,TransitionScale:v,TransitionSlide:$},T=(e,r,i)=>{e.props??(e.props={}),e.props[r]={default:t.isArray(i)||t.isObject(i)?()=>i:i}},_=function(t,e={}){Object.keys(E).forEach((r=>{t.component(r,((t,e)=>{var r;const i=(null==e?void 0:e.defaultProps)??{},s=(null==(r=null==e?void 0:e.componentDefaultProps)?void 0:r[t])??{};return Object.entries(i).forEach((([e,r])=>{T(E[t],e,r)})),Object.entries(s).forEach((([e,r])=>{T(E[t],e,r)})),E[t]})(r,e))}))},b={install:_};exports.TransitionExpand=l,exports.TransitionFade=u,exports.TransitionScale=v,exports.TransitionSlide=$,exports.default=b,exports.plugin=t=>({install(e,r){_(e,t)}});
